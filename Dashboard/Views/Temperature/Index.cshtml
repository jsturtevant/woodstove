
@{
    ViewBag.Title = "Temprature";
}

<div class="row">
    <div class="col-sm-4 text-center">
        <h1 class="">Current Temp</h1>
        <span id="temp">0</span>

        <canvas id="mycanvas" width="400" height="100"></canvas>
    </div>
</div>

@section scripts
{
    <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <script src="~/Scripts/smoothie.js"></script>

    <script>
        $(function () {
            var smoothie = new SmoothieChart();
            smoothie.streamTo(document.getElementById("mycanvas"));
            var line1 = new TimeSeries();
            smoothie.addTimeSeries(line1);

            // Declare a proxy to reference the hub.
            var tempHub = $.connection.tempHub;
            var currentDevice;

            tempHub.client.currentTemp = function (temp) {
                $('#temp').html(temp);
                line1.append(new Date().getTime(), temp);
            };

            $.connection.hub.start();
        });
    </script>
}